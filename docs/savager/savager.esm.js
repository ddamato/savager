const e=function(e){const t=document.getElementById(e);let n=document.getElementById("savager-mastersheet");n||(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.id="savager-mastersheet",n.style.display="none",document.body.appendChild(n)),Array.prototype.slice.call(t.querySelectorAll("symbol")).forEach(e=>n.appendChild(e)),t.remove()}.toString();class t{constructor(e,t){this._symbols={},this._externalUrl="";const{externalUrl:n}=t||{};this.storeSymbols(e).setExternalUrl(n)}prepareAssets(t,r){const{external:s,autoappend:o,consolidate:a,classNames:c,toElement:l}=r||{},i=c?`class="${[].concat(c).filter(Boolean).join(" ")}"`:"";let d=e=>e;l&&(d="function"==typeof l?l:n);const p=[].concat(t).reduce((function(e,t){let n="#"+t,r="internal";s&&(n=`${this._externalUrl}${t}.svg`+n,r="external");const o=`<svg ${[i,r].filter(Boolean).join(" ")}><use xlink:href="${n}"/></svg>`;return Object.assign(e,{[t]:d(o)})}),{}),u=this._symbols;let m=Object.keys(p).reduce((function(e,t){return u&&u[t]?e+u[t].replace(/<\/?svg ?[^>]*>/gim,""):e}),"");if(m){const{sheet:t,script:n}=function(t,n){const r="savager-"+Math.random().toString(36).substr(2,9),s=`(${e})('${r}')`,o=`<script type="text/javascript">${s}<\/script>`,a=`<svg id="${r}" xmlns="http://www.w3.org/2000/svg" style="display:none;" consolidate="false">${t}${o}</svg>`;return{sheet:!1===n?a.replace(o,""):a.replace('consolidate="false"',""),script:s}}(m,a);if("undefined"!=typeof document&&document.createElement&&o&&!s){!function(e,t){const n=document.createDocumentFragment(),r=document.createElement("template");if(r.innerHTML=e,n.appendChild(r.content),t){const e=document.createElement("script");e.setAttribute("autoappend",""),e.appendChild(document.createTextNode(t)),n.appendChild(e)}document.body.append(n)}(t,("boolean"!=typeof a||a)&&n)}return{assets:p,sheet:t}}return{assets:p}}storeSymbols(e){return this._symbols=Object.assign({},this._symbols,e),this}setExternalUrl(e){return e&&(this._externalUrl=e),this}}function n(e){if("undefined"!=typeof document&&document.createElement){const t=document.createElement("template");return t.innerHTML=e,t.content}return e}async function r(e){if(!e)return{};if("string"==typeof e){if("undefined"!=typeof window||!require)throw new Error("Can only create symbols using path within node environment.");const t=require("path"),n=require("fs");try{const s=await n.promises.readdir(e),o=await Promise.all(s.map(async r=>({[t.parse(r).name]:(await n.promises.readFile(t.resolve(e,r))).toString()})));return r(o.reduce((e,t)=>Object.assign(e,t),{}))}catch(e){throw new Error(e)}}return"object"==typeof e?Object.entries(e).reduce((e,[t,n])=>Object.assign(e,{[t]:s(n,t)}),{}):void 0}function s(e,t){let n='xmlns="http://www.w3.org/2000/svg"';const r=e.replace(/(xmlns=.[^"']+)./gim,e=>(n=e,"")).replace(/(<\/?)svg/gim,"$1symbol").replace(/<symbol/,`<symbol id="${t}"`);return`<svg ${n}>${r}</svg>`.replace(/\r?\n|\r|/g,"").replace(/ {2,}/g," ")}const o=t;export default t;export{o as Savager,r as createSymbols};
