!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Savager={})}(this,(function(e){"use strict";const t=function(e){const t=document.getElementById(e);let n=document.getElementById("savager-mastersheet");n||(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.id="savager-mastersheet",n.style.display="none",document.body.appendChild(n)),Array.prototype.slice.call(t.querySelectorAll("symbol")).forEach(e=>n.appendChild(e)),t.remove()}.toString();class n{constructor(e,t){this._symbols={},this._externalUrl="";const{externalUrl:n}=t||{};this.storeSymbols(e).setExternalUrl(n)}prepareAssets(e,n){const{external:r,autoappend:o,consolidate:a,classNames:c,toElement:i}=n||{},l=c?`class="${[].concat(c).filter(Boolean).join(" ")}"`:"";let d=e=>e;i&&(d="function"==typeof i?i:s);const u=[].concat(e).reduce((function(e,t){let n="#"+t,s="internal";r&&(n=`${this._externalUrl}${t}.svg`+n,s="external");const o=`<svg ${[l,s].filter(Boolean).join(" ")}><use xlink:href="${n}"/></svg>`;return Object.assign(e,{[t]:d(o)})}),{}),p=this._symbols;let m=Object.keys(u).reduce((function(e,t){return p&&p[t]?e+p[t].replace(/<\/?svg ?[^>]*>/gim,""):e}),"");if(m){const{sheet:e,script:n}=function(e,n){const s="savager-"+Math.random().toString(36).substr(2,9),r=`(${t})('${s}')`,o=`<script type="text/javascript">${r}<\/script>`,a=`<svg id="${s}" xmlns="http://www.w3.org/2000/svg" style="display:none;" consolidate="false">${e}${o}</svg>`;return{sheet:!1===n?a.replace(o,""):a.replace('consolidate="false"',""),script:r}}(m,a);if("undefined"!=typeof document&&document.createElement&&o&&!r){!function(e,t){const n=document.createDocumentFragment(),s=document.createElement("template");if(s.innerHTML=e,n.appendChild(s.content),t){const e=document.createElement("script");e.setAttribute("autoappend",""),e.appendChild(document.createTextNode(t)),n.appendChild(e)}document.body.append(n)}(e,("boolean"!=typeof a||a)&&n)}return{assets:u,sheet:e}}return{assets:u}}storeSymbols(e){return this._symbols=Object.assign({},this._symbols,e),this}setExternalUrl(e){return e&&(this._externalUrl=e),this}}function s(e){if("undefined"!=typeof document&&document.createElement){const t=document.createElement("template");return t.innerHTML=e,t.content}return e}function r(e,t){let n='xmlns="http://www.w3.org/2000/svg"';const s=e.replace(/(xmlns=.[^"']+)./gim,e=>(n=e,"")).replace(/(<\/?)svg/gim,"$1symbol").replace(/<symbol/,`<symbol id="${t}"`);return`<svg ${n}>${s}</svg>`.replace(/\r?\n|\r|/g,"").replace(/ {2,}/g," ")}const o=n;e.Savager=o,e.createSymbols=async function e(t){if(!t)return{};if("string"==typeof t){if("undefined"!=typeof window||!require)throw new Error("Can only create symbols using path within node environment.");const n=require("path"),s=require("fs");try{const r=await s.promises.readdir(t),o=await Promise.all(r.map(async e=>({[n.parse(e).name]:(await s.promises.readFile(n.resolve(t,e))).toString()})));return e(o.reduce((e,t)=>Object.assign(e,t),{}))}catch(e){throw new Error(e)}}return"object"==typeof t?Object.entries(t).reduce((e,[t,n])=>Object.assign(e,{[t]:r(n,t)}),{}):void 0},e.default=n,Object.defineProperty(e,"__esModule",{value:!0})}));
