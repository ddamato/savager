<!doctype html><html lang="en"><head><title>Savager Example Page</title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width,initial-scale=1" name="viewport"><meta name="description" content="Savager Example Page"><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet"><link href="styles.css" rel="stylesheet"></head><body><nav class="navigation"><svg exposure="internal" xmlns="http://www.w3.org/2000/svg" class="savager-logo"><use href="#savager-logo"></use></svg><ul class="none"><li><a class="neom-concave" href="#getting-started">Getting Started</a></li><li><a class="neom-concave" href="#external-assets">External Assets</a></li><li><a class="neom-concave" href="#internal-assets">Internal Assets</a></li><li><a class="neom-concave" href="#contingencies">Contingencies</a></li><li><a class="neom-concave" href="#examples">Examples</a></li></ul></nav><main class="content"><h1 id="savager">Savager</h1><h2 id="getting-started">Getting Started</h2><p>Install the package into your project</p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> i savager
</code></pre><p>Run the <code>create-symbols</code> script against your SVG files.</p><pre class="language-bash"><code class="language-bash">create-symbols -i svg -o assets -t esm
</code></pre><p>Then import <code>Savager</code> and the symbols into your build script. The <code>assets</code> output will contain your new SVG markup!</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Savager <span class="token keyword">from</span> <span class="token string">'savager'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> symbols <span class="token keyword">from</span> <span class="token string">'./manifest.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> savager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Savager</span><span class="token punctuation">(</span>symbols<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> assets<span class="token punctuation">,</span> sheet <span class="token punctuation">}</span> <span class="token operator">=</span> savager<span class="token punctuation">.</span><span class="token function">prepareAssets</span><span class="token punctuation">(</span><span class="token string">'balloon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> assets<span class="token punctuation">.</span>balloon<span class="token punctuation">;</span>
</code></pre><h2 id="external-assets">External Assets</h2><p>When hosting assets externally, they should still be processed first by the <code>create-symbols</code> script. The script will create a manifest which the <code>Savager</code> instance uses to prepare assets.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Savager <span class="token keyword">from</span> <span class="token string">'savager'</span><span class="token punctuation">;</span> <span class="token comment">/* The constructor */</span>
<span class="token keyword">import</span> symbols <span class="token keyword">from</span> <span class="token string">'./manifest.js'</span><span class="token punctuation">;</span> <span class="token comment">/* manifest.js, created from the `create-symbols` script */</span>
</code></pre><p>The assets created should be the ones hosted externally. Savager will then construct the urls based on the <code>externalPath</code> option provided. It's probably best to set this in the constructor options.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Savager <span class="token keyword">from</span> <span class="token string">'savager'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> symbols <span class="token keyword">from</span> <span class="token string">'./manifest.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">SVG_CDN_PATH</span> <span class="token operator">=</span> <span class="token string">'https://assets.cdn.com/path/to/assets'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> savager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Savager</span><span class="token punctuation">(</span>symbols<span class="token punctuation">,</span> <span class="token punctuation">{</span> externalPath<span class="token operator">:</span> <span class="token constant">SVG_CDN_PATH</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="internal-assets">Internal Assets</h2><p>If you aren't hosting assets externally, you'll need to include a reference sheet on the page. You can let the <code>prepareAssets()</code> method attempt to append the sheet to the <code>document.body</code>:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Savager <span class="token keyword">from</span> <span class="token string">'savager'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> symbols <span class="token keyword">from</span> <span class="token string">'./manifest.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> savager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Savager</span><span class="token punctuation">(</span>symbols<span class="token punctuation">,</span> <span class="token punctuation">{</span> autoAppend<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>This will only work in a browser context. When running the script on a server, you'll need to include the reference sheet in the response and write the returned reference sheet into the HTML:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> nunjucks <span class="token keyword">from</span> <span class="token string">'nunjucks'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Savager <span class="token keyword">from</span> <span class="token string">'savager'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> symbols <span class="token keyword">from</span> <span class="token string">'./manifest.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> savager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Savager</span><span class="token punctuation">(</span>symbols<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> assets<span class="token punctuation">,</span> sheet <span class="token punctuation">}</span> <span class="token operator">=</span> savager<span class="token punctuation">.</span><span class="token function">prepareAssets</span><span class="token punctuation">(</span><span class="token string">'balloon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> html <span class="token operator">=</span> nunjucks<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index.njk'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> assets<span class="token punctuation">,</span> sheet <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>The example above uses <a href="https://mozilla.github.io/nunjucks/">Nunjucks</a> as a templating engine.</p><h2 id="contingencies">Contingencies</h2><p>Depending on the method you choose, there may be reasons why the SVG doesn't render.</p><ul><li>When using the <a href="https://bitsofco.de/what-is-the-shadow-dom/">Shadow DOM</a>, referencing by <code>id</code> only exists within the root document that the element exists in; it cannot pentrate its search to a parent root document.</li><li>When hosting your assets externally, often it becomes beneficial to host via a <a href="https://www.cloudflare.com/learning/cdn/what-is-a-cdn/">CDN</a>. SVG requests are subject to <a href="https://www.codecademy.com/articles/what-is-cors">CORS</a>. Specifically, attempting to request an SVG resource from a different domain will often be blocked.</li></ul><p>Both of these can be resolved using the <code>attemptInject</code> option, which will take the referenced asset shape and make a copy to be injected into the node. When preparing the assets, you will also receive a <code>inject</code> function which should be executed on the page where the SVGs will appear.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Savager <span class="token keyword">from</span> <span class="token string">'savager'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> symbols <span class="token keyword">from</span> <span class="token string">'./manifest.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> savager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Savager</span><span class="token punctuation">(</span>symbols<span class="token punctuation">,</span> <span class="token punctuation">{</span> attemptInject<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> assets<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token operator">=</span> savager<span class="token punctuation">.</span><span class="token function">prepareAssets</span><span class="token punctuation">(</span><span class="token string">'balloon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>If you need the <code>inject</code> function in a different context from where you prepare assets, you can export it directly from the package. Be sure that when preparing assets, that <code>attemptInject</code> option was set to <code>true</code>. Otherwise, executing the function will do nothing.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> injectionFn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'savager'</span><span class="token punctuation">;</span>
</code></pre><h2 id="examples">Examples</h2><p>Each one of the examples shows the code after initializing an instance of Savager as well as the output to this page with an SVG.</p><p>Reference sheets are automatically consolidated under the <code>savager-primarysheet</code> Element using the default <code>consolidate</code> option. This consolidates multiple reference sheets found on the page into a single sheet.</p><hr><h3 id="assets-as-innerhtml">Assets as innerHTML</h3><p>Creating these assets will return strings. You can export the strings to a render function for templating or just write them as HTML. Remember to add the sheet to the page if the assets are not hosted.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> assets<span class="token punctuation">,</span> sheet <span class="token punctuation">}</span> <span class="token operator">=</span> savager<span class="token punctuation">.</span><span class="token function">prepareAssets</span><span class="token punctuation">(</span><span class="token string">'bang-triangle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Add the reference sheet to the page */</span>
<span class="token keyword">const</span> sheetContainer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sheetContainer<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> sheet<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>sheetContainer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Set the innerHTML of an existing element */</span>
<span class="token keyword">const</span> mySvg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.mySvg.innerHtmlExample'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySvg<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> assets<span class="token punctuation">[</span><span class="token string">'bang-triangle'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="mySvg innerHtmlExample"></div><hr><h3 id="auto-appending-the-sheet">Auto appending the sheet</h3><p>Adding the reference sheet can be easier when running in a browser context.</p><pre class="language-js"><code class="language-js"><span class="token comment">/* Reference sheet is automatically appended to the document.body */</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> autoAppend<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> assets <span class="token punctuation">}</span> <span class="token operator">=</span> savager<span class="token punctuation">.</span><span class="token function">prepareAssets</span><span class="token punctuation">(</span><span class="token string">'bang-triangle'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Set the innerHTML of an existing element */</span>
<span class="token keyword">const</span> mySvg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.mySvg.autoAppendExample'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySvg<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> assets<span class="token punctuation">[</span><span class="token string">'bang-triangle'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="mySvg autoAppendExample"></div><hr><h3 id="assets-as-document-fragment">Assets as document fragment</h3><p>When using this method, it must be run in a browser context to create the DOM Element. Running this server-side will throw an error.</p><pre class="language-js"><code class="language-js"><span class="token comment">/* Create a document fragment for each asset, automatically append reference sheet */</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> toSvgElement<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> autoAppend<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> assets <span class="token punctuation">}</span> <span class="token operator">=</span> savager<span class="token punctuation">.</span><span class="token function">prepareAssets</span><span class="token punctuation">(</span><span class="token string">'bang-triangle'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Append the svg to an existing element */</span>
<span class="token keyword">const</span> mySvg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.mySvg.documentFragmentExample'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySvg<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>assets<span class="token punctuation">[</span><span class="token string">'bang-triangle'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="mySvg documentFragmentExample"></div><hr><h3 id="adding-class-names-to-the-assets">Adding class names to the assets</h3><p>You can provide a single string or an array of strings.</p><pre class="language-js"><code class="language-js"><span class="token comment">/* Add the 'example-extraLarge' class to each svg, automatically append reference sheet */</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> classNames<span class="token operator">:</span> <span class="token string">'example-extraLarge'</span><span class="token punctuation">,</span> autoAppend<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> assets <span class="token punctuation">}</span> <span class="token operator">=</span> savager<span class="token punctuation">.</span><span class="token function">prepareAssets</span><span class="token punctuation">(</span><span class="token string">'bang-triangle'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Set the innerHTML of an existing element */</span>
<span class="token keyword">const</span> mySvg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.mySvg.classNameExample'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySvg<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> assets<span class="token punctuation">[</span><span class="token string">'bang-triangle'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="mySvg classNameExample"></div><hr><h3 id="referencing-external-assets">Referencing external assets</h3><p>Provide the path to the assets as an option either in the constructor (re: <a href="#external-assets">External Assets</a>) or in the <code>prepareAssets()</code> method. Using external assets does not need a reference sheet to be added in the page.</p><pre class="language-js"><code class="language-js"><span class="token comment">/* Include the path to the assets */</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> externalPath<span class="token operator">:</span> <span class="token string">'assets'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> assets <span class="token punctuation">}</span> <span class="token operator">=</span> savager<span class="token punctuation">.</span><span class="token function">prepareAssets</span><span class="token punctuation">(</span><span class="token string">'bang-triangle'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Set the innerHTML of an existing element */</span>
<span class="token keyword">const</span> mySvg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.mySvg.externalPathExample'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySvg<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> assets<span class="token punctuation">[</span><span class="token string">'bang-triangle'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="mySvg externalPathExample"></div></main><script type="module" src="script.js"></script></body></html>