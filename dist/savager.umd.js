!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Savager=t()}(this,(function(){"use strict";const e=function(e){const t=document.getElementById(e);let s=document.getElementById("savager-mastersheet");s||(s=document.createElementNS("http://www.w3.org/2000/svg","svg"),s.id="savager-mastersheet",s.style.display="none",document.body.appendChild(s)),Array.prototype.slice.call(t.querySelectorAll("symbol")).forEach(e=>s.appendChild(e)),t.remove()}.toString();return class{constructor(e,t){this._symbols={},this._externalUrl="";const{externalUrl:s}=t||{};this.storeSymbols(e).setExternalUrl(s)}prepareAssets(t,s){const{external:n,autoappend:o,consolidate:r,classNames:c}=s,l=`class="${[].concat(c).filter(Boolean).join(" ")}"`,a=[].concat(t).reduce((function(e,t){let s="#"+t,o="internal";n&&(s=`${this._externalUrl}${t}.svg`+s,o="external");const r=`<svg ${l} ${o}><use xlink:href="${s}"/></svg>`;return Object.assign(e,{[t]:r})}),{});let i=Object.keys(a).reduce((function(e,t){return Object.keys(this._symbols).length&&this._symbols[t]?e+this._symbols[t].replace(/<\/?svg ?[^>]*>/gim,""):e}),"");if(i){const{sheet:t,script:s}=function(t,s){const n="savager-"+Math.random().toString(36).substr(2,9),o=`(${e})('${n}')`,r=`<script type="text/javascript">${o}<\/script>`,c=`<svg id="${n}" xmlns="http://www.w3.org/2000/svg" style="display:none;" consolidate="false">${t}${r}</svg>`;return{sheet:!1===s?c.replace(r,""):c.replace('consolidate="false"',""),script:o}}(i,r);if("undefined"!=typeof document&&document.createElement&&o&&!n){!function(e,t){const s=document.createDocumentFragment(),n=document.createElement("template");if(n.innerHTML=e,s.appendChild(n.content),t){const e=document.createElement("script");e.setAttribute("autoappend",""),e.appendChild(document.createTextNode(t)),s.appendChild(e)}document.body.append(s)}(t,("boolean"!=typeof r||r)&&s)}return{assets:a,spritesheet:t}}return{assets:a}}storeSymbols(e){return this._symbols=Object.assign({},this._symbols,e),this}setExternalUrl(e){return e&&(this._externalUrl=e),this}}}));
