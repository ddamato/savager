!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Savager={})}(this,(function(e){"use strict";const t=function(e){const t=document.getElementById(e);let s=document.getElementById("savager-mastersheet");s||(s=document.createElementNS("http://www.w3.org/2000/svg","svg"),s.id="savager-mastersheet",s.style.display="none",document.body.appendChild(s)),Array.prototype.slice.call(t.querySelectorAll("symbol")).forEach(e=>s.appendChild(e)),t.remove()}.toString();class s{constructor(e,t){this._symbols={},this._externalUrl="";const{externalUrl:s}=t||{};this.storeSymbols(e).setExternalUrl(s)}prepareAssets(e,s){const{external:n,autoappend:r,consolidate:o,classNames:a}=s,i=`class="${[].concat(a).filter(Boolean).join(" ")}"`,c=[].concat(e).reduce((function(e,t){let s="#"+t,r="internal";n&&(s=`${this._externalUrl}${t}.svg`+s,r="external");const o=`<svg ${i} ${r}><use xlink:href="${s}"/></svg>`;return Object.assign(e,{[t]:o})}),{});let l=Object.keys(c).reduce((function(e,t){return Object.keys(this._symbols).length&&this._symbols[t]?e+this._symbols[t].replace(/<\/?svg ?[^>]*>/gim,""):e}),"");if(l){const{sheet:e,script:s}=function(e,s){const n="savager-"+Math.random().toString(36).substr(2,9),r=`(${t})('${n}')`,o=`<script type="text/javascript">${r}<\/script>`,a=`<svg id="${n}" xmlns="http://www.w3.org/2000/svg" style="display:none;" consolidate="false">${e}${o}</svg>`;return{sheet:!1===s?a.replace(o,""):a.replace('consolidate="false"',""),script:r}}(l,o);if("undefined"!=typeof document&&document.createElement&&r&&!n){!function(e,t){const s=document.createDocumentFragment(),n=document.createElement("template");if(n.innerHTML=e,s.appendChild(n.content),t){const e=document.createElement("script");e.setAttribute("autoappend",""),e.appendChild(document.createTextNode(t)),s.appendChild(e)}document.body.append(s)}(e,("boolean"!=typeof o||o)&&s)}return{assets:c,spritesheet:e}}return{assets:c}}storeSymbols(e){return this._symbols=Object.assign({},this._symbols,e),this}setExternalUrl(e){return e&&(this._externalUrl=e),this}}function n(e,t){const s=e.replace(/<\/?svg ?([^>]+)?>/i,"$1"),n=s.split(" ").filter(e=>!e.startsWith("xmlns")).unshift(`id="${t}"`);return`<svg xmlns="http://www.w3.org/2000/svg">${e.replace(s,"").replace(/(<\/?)svg/gim,"$1symbol").replace(/<symbol /i,"<symbol "+n.join(" "))}</svg>`}const r=s;e.Savager=r,e.createSymbols=async function(e){if(!e)return{};if("string"==typeof e){if("undefined"!=typeof window||!require)throw new Error("Can only create symbols using path within node environment.");const t=require("path"),s=require("fs");try{const n=await s.promises.readdir(e),r=Promise.all(n.map(async e=>({[t.parse(e).name]:await s.promises.readFile(e)})));return createAssets(r)}catch(e){throw new Error(e)}}return"object"==typeof e?Object.entries(e).reduce((e,[t,s])=>Object.assign(e,{[t]:n(s,t)}),{}):void 0},e.default=s,Object.defineProperty(e,"__esModule",{value:!0})}));
